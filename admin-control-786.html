<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>EarnVeda Admin</title>
    <style>
        body { background: #1a1a2e; color: white; font-family: sans-serif; text-align: center; }
        .box { background: #16213e; padding: 20px; border-radius: 10px; display: inline-block; margin-top: 50px; border: 2px solid #e94560; }
        #err { color: #ff4d4d; font-weight: bold; margin-top: 10px; }
        .user { background: #0f3460; padding: 10px; margin: 5px; border-radius: 5px; text-align: left; }
    </style>
</head>
<body>
    <div class="box">
        <h2>Admin Master Control</h2>
        <button onclick="loadData()" style="padding: 10px 20px; cursor: pointer;">Show All Users & Balance</button>
        <div id="err"></div>
        <div id="list"></div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <script>
        const firebaseConfig = { apiKey: "AIzaSyCLrqzC0q_i7EzWdw_aoGRvI-qD_2kMsc", projectId: "earnify-official" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        async function loadData() {
            const listDiv = document.getElementById('list');
            const errDiv = document.getElementById('err');
            listDiv.innerHTML = "Searching database...";
            errDiv.innerHTML = "";

            try {
                const snapshot = await db.collection("users").get();
                if(snapshot.empty) {
                    listDiv.innerHTML = "Database is EMPTY! No users found.";
                } else {
                    let h = "";
                    snapshot.forEach(doc => {
                        h += `<div class="user">ðŸ“± ${doc.id} | ðŸ’° â‚¹${doc.data().balance || 0}</div>`;
                    });
                    listDiv.innerHTML = h;
                }
            } catch (e) {
                errDiv.innerHTML = "FIREBASE ERROR: " + e.message;
                listDiv.innerHTML = "Failed to load.";
            }
        }
    </script>
</body>
</html>
